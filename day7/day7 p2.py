##                                 ###
## Solution by vitras21 (Vitaly.R) ###
##                                 ###

input_data = """......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^...^....................................................................
.............................................................................................................................................
...................................................................^.^.^.^...................................................................
.............................................................................................................................................
..................................................................^.^.^...^..................................................................
.............................................................................................................................................
.................................................................^.....^.^.^.................................................................
.............................................................................................................................................
................................................................^.^...^.^.^.^................................................................
.............................................................................................................................................
...............................................................^.^.^.^...^.^.^...............................................................
.............................................................................................................................................
..............................................................^.^.^.^.^...^.^.^..............................................................
.............................................................................................................................................
.............................................................^.^.^.....^...^.^.^.............................................................
.............................................................................................................................................
............................................................^.^.^.^.^.^.^.^.^.^.^............................................................
.............................................................................................................................................
...........................................................^.^.^.....^.^.^.....^.^...........................................................
.............................................................................................................................................
..........................................................^.^...^.^...^.^.^.^.^.^.^..........................................................
.............................................................................................................................................
.........................................................^.^.^.^.......^...^.^.^.^.^.........................................................
.............................................................................................................................................
........................................................^.^.^.^.....^.^.^.^.^.^.^...^........................................................
.............................................................................................................................................
.......................................................^.^.........^...^...^.^.....^.^.......................................................
.............................................................................................................................................
......................................................^.^.^.^...^...^...^.^.....^.....^......................................................
.............................................................................................................................................
.....................................................^.^...^...........^.^.^.^.^.^...^.^.....................................................
.............................................................................................................................................
....................................................^.^.^.^...^.....^...^.^...^...^.....^....................................................
.............................................................................................................................................
...................................................^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.^...................................................
.............................................................................................................................................
..................................................^.^...^.^.^...^.^.^.^.^.^.^.......^...^.^..................................................
.............................................................................................................................................
.................................................^...^.......^...^...^.^...^...^.^...^.^.^.^.................................................
.............................................................................................................................................
................................................^.....^.^.^...^.^.^...^.....^.^.^...^.^...^.^................................................
.............................................................................................................................................
...............................................^.^...^.^.^.^...^...^...^.....^...^...^.^...^.^...............................................
.............................................................................................................................................
..............................................^...........^.^.....^.......^.^.^...^.^.^.^.^.^.^..............................................
.............................................................................................................................................
.............................................^.^.^.^.....^.^.^.^.^...^.......^.^.....^.^...^...^.............................................
.............................................................................................................................................
............................................^...^.^.^...^.^.^.^.....^.^.....^...^...^.^.^.^.^.^.^............................................
.............................................................................................................................................
...........................................^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^...^...^...^.^.^...^.^...........................................
.............................................................................................................................................
..........................................^.^...^.^.^.^...^.^.^.^.^...^...^.^...^...........^...^.^..........................................
.............................................................................................................................................
.........................................^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.........................................
.............................................................................................................................................
........................................^.^.^.....^.^.^...^.^...^.^...^...^...^.^.^.^.^.....^.^.^.^.^........................................
.............................................................................................................................................
.......................................^.^.^...^...^.^.....^.^.^.^.^.^.^.^.^.^...^.^.^.^.^...^...^...^.......................................
.............................................................................................................................................
......................................^.^.^.^.^.......^.^.^.^.^.^.^.....^...^.^.^.^.^.....^...^.....^.^......................................
.............................................................................................................................................
.....................................^.^.^.^.^.^.^.^.^.^.....^.......^.....^.^.^.^.^...^.^...^.^.^.^.^.^.....................................
.............................................................................................................................................
....................................^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.^.....^.^.^...^.^.....^.^....................................
.............................................................................................................................................
...................................^.^.^.....^.....^.^.^.^.....^.^.^.^.^.^...^.^...^...^.^.^...^...^.^.^.^...................................
.............................................................................................................................................
..................................^.^.^.^...^.^.....^...^...^.^.^.^.^.....^.^.^.^.^.^...^.^...^.^...^.^.^.^..................................
.............................................................................................................................................
.................................^.^.^.^.^.^...^.^.^...^.^...^.....^.......^.^.^.^.^.^.^.^.^.^.^.....^.....^.................................
.............................................................................................................................................
................................^.^.^.^.^.^.^...^.^...^...^.^.......^...^...^.^...^...^.^...^.^.^.^.^...^.^.^................................
.............................................................................................................................................
...............................^.^...^.^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^.^.....^.^...^.^.....^.^.^...^.^.^.^...............................
.............................................................................................................................................
..............................^.^.^.^...^.^.^.^.^.^.........^...^.^.^.....^...^.^.^.^.^.....^.......^.^.^...^.^..............................
.............................................................................................................................................
.............................^.^...^.^.^.^.....^.^...^.^.^.^...^.^.^...^.^...^.^.^.^.^...^.^.^.....^...^.....^.^.............................
.............................................................................................................................................
............................^.^.^.^.^.^...^...^.^.^.^...^.^...^...^.^...^.^.^.^.^.^...^.^.^.^...^.^.....^.^.^.^.^............................
.............................................................................................................................................
...........................^.^.^.^.^.^.^.^.^...^...^...^.^.^.^...^...^.^.^.^.^.^.^...^.^.^...^.^.......^.^.^.^.^.^...........................
.............................................................................................................................................
..........................^.^.^...^...^...^.^.^.^...^.^.^.^.^.^...^.^.^.^.^...^.....^...^.^.^...^.^.^.....^.^.^.^.^..........................
.............................................................................................................................................
.........................^...^.^...^...^.^.^.^.^.^.^...^.^.^.....^...^...^.^.^.^.^...^.^.^...^.^.^...^.....^.^.^.^.^.........................
.............................................................................................................................................
........................^.^.^...^.^...^...^.^...^.^.^...^.^.^.^.^.^.^...^.^.^.^...^.^...^.^.^.^.^...^.^.^.^.....^.^.^........................
.............................................................................................................................................
.......................^.^.^.^.^.^.^.^.............^.....^.^.....^.^.^...^...^.....^.^.^.^.^...^.......^.^.^.^.......^.......................
.............................................................................................................................................
......................^.^...^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^...^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.....^.^......................
.............................................................................................................................................
.....................^.^.^.^.^.^...^.......^.^.^.^...^.^.^.^.^.^.....^...^.^.^...^.^.^.^.^...^.^.^.^.^.....^...^.^.^.^.^.....................
.............................................................................................................................................
....................^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^.^.^...^.^...^.^.^.^...^.^.^.^.^...^.^.^....................
.............................................................................................................................................
...................^.......^...^.^.....^.^.^.^...^.^...^...^...^...^.^...^...^.^.^.......^.^.^.^.^...^...^...^.^...^.....^...................
.............................................................................................................................................
..................^.^...^...^.^.^...^...^.^...^.^.^.......^.^...^.^.^.^.^.^.^.^.^.^...^...^.....^.^.^.^...^.^.......^.^.^.^..................
.............................................................................................................................................
.................^.^.^.^.^.^.^...^.....^...^.^.^.^...^.^...^.^.....^.^...^...^...^.^.^.^...^...^.^.^.^.^.....^.^.^...^.^.^.^.................
.............................................................................................................................................
................^.^.^.^...^.^.^.^.......^.^...^...^.^...^.^.^.....^...^.^.^.^.^...^.^.^.^.^.^.^.^...^.^.^.^.^.......^...^...^................
.............................................................................................................................................
...............^.^.^.^.^.^.^...^.^.^.^.......^.^.....^...^.^.^.....^...^.^.^...^.^...^...^...^.^.^.....^...^.^...^...^.^.^...^...............
.............................................................................................................................................
..............^.^.....^.^.^...^...^.^.^.^...^.^.^...^.^...^.........^...^.^...^...^.^.^.....^.^.....^.^...^.^...^.^.^...^.^.^.^..............
.............................................................................................................................................
.............^...^...^.......^.^.^...^.^...^...^.....^...^.^.^.^.^.^.....^.^.......^.^.^.^.^...^.^...^.^.^.^.^.^...^.^.^.^.....^.............
.............................................................................................................................................
............^.^.^...^.^.^.^...^...^.^.^...^.^.^.^.^.^.^...^.^.^.^...^.....^.^.^...^.^.^.^...^.^.....^.^.^.^...^.^.^...^.^...^...^............
.............................................................................................................................................
...........^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.......^.^.^.....^...^.^.^.^.....^.^...^.^.^...^.^...^...^...^.^...^.^.^.^.^.....^.^.^...........
.............................................................................................................................................
..........^.....^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^.....^.^.^...^.^.^.^...^...^.^.^...^.....^...^.^...^.....^.....^...^..........
.............................................................................................................................................
.........^.^...^.^.^...^.^...^...^.^.^.^...^.^.^.^.^.....^...^.^...^...^...^...^.^.^...^...^.^.^.^.^.....^.^.^.....^...^.^.^.^.^.^.^.........
.............................................................................................................................................
........^.^...^.......^.^.^.....^.^.^.^.^.^.^...^.^.^.....^.^.^.^.^.......^...^.^.^.^...^.....^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^...^........
.............................................................................................................................................
.......^.^.^.....^...^.^.^...^.^.^.^.^.....^.^.....^.^.^.^.^.^.^.^...^.^...^...^.^.^.^.^...^.......^.^...^.....^...^.^.^.^.^.^.^.^.^.^.......
.............................................................................................................................................
......^...^.^...........^.^.^.......^...^.^.^.^.^.^.^.^.^...^.^.^.^.^...^.....^...^.^.^.^.^.^...^.^...^.....^...^.^.^.^...^...^.^...^.^......
.............................................................................................................................................
.....^.^.^...^.....^.....^.^.....^...^.^.^.^.^...^.^.^.^.^.^.......^...^...^.^...^...^.^.^.^...^...^.......^.....^.^.^...^.^.^.^.^...^.^.....
.............................................................................................................................................
....^.^.^.^.^...^.^...^.^.^.^.^...^.^...^...^...^.^.^...^.^.^.......^.^.^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^.^.^.^.^.........^.^...^.^...^....
.............................................................................................................................................
...^.^...^.^.^.^.^.^.^.^.^.^.......^.^...^...^...^.^.^.^...^.^...^...^.^...^.^...^.^.^...^...^...^.....^...^.....^.^.^.^...^.^...^.^...^.^...
.............................................................................................................................................
..^...^...^...^.^.^...^...^.^.^...^.^.^...^.....^.....^...^.^.......^...^...^.^.........^...^...^.^...^...^...^.....^.^.^.^.^.^.........^.^..
.............................................................................................................................................
.^...^.^.^.^.^.^.^.^...^.^...^.^.^...^.^.^...^...^.^...^.^...^...^...^.^.^.^.^.^.^.^.^.^.^...^.^.....^.....^.^.^.^.^.^.^.......^.^.^.^.^...^.
.............................................................................................................................................
"""

grid_lines = input_data.splitlines()
grid = [line.strip() for line in grid_lines if line.strip()]

if not grid:
    total_timelines = 0
else:
    max_rows = len(grid)
    max_cols = len(grid[0])
    T = [[0] * max_cols for _ in range(max_rows)]
    
    try:
        spos = grid[0].index('S')
    except ValueError:
        spos = -1

    if spos != -1:
        T[0][spos] = 1
        for i in range(1, max_rows):
            for j in range(max_cols):

                if grid[i-1][j] != '^':
                    T[i][j] += T[i-1][j]
                
                if j > 0 and grid[i-1][j-1] == '^':
                    T[i][j] += T[i-1][j-1]
                    
                if j < max_cols - 1 and grid[i-1][j+1] == '^':
                    T[i][j] += T[i-1][j+1]
                    
        total_timelines = sum(T[max_rows - 1])
    else:
        total_timelines = 0


print(total_timelines)
